import{r as e,u as r,j as a,c as s,S as t,T as i,U as l,V as n,L as o,v as d,H as m}from"./index-bGB9rp9t.js";import{m as c}from"./motion-DaFSZY4b.js";const x=()=>{const[x,h]=e.useState({name:"",email:"",password:"",confirmPassword:"",agreeTerms:!1}),[u,p]=e.useState(!1),[y,g]=e.useState(!1),[j,b]=e.useState(!1),[f,k]=e.useState({}),N=r(),w=e=>{const{name:r,value:a,type:s,checked:t}=e.target;h({...x,[r]:"checkbox"===s?t:a}),f[r]&&k({...f,[r]:void 0})},v=(e=>{if(!e)return 0;let r=0;return e.length>=8&&(r+=1),e.length>=12&&(r+=1),/[A-Z]/.test(e)&&(r+=1),/[a-z]/.test(e)&&(r+=1),/[0-9]/.test(e)&&(r+=1),/[^A-Za-z0-9]/.test(e)&&(r+=1),Math.min(r,5)})(x.password);return a.jsx("div",{className:"min-h-screen py-16",children:a.jsx("div",{className:"container-custom",children:a.jsx("div",{className:"max-w-md mx-auto",children:a.jsxs(c.div,{className:"card",initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{duration:.5},children:[a.jsxs("div",{className:"text-center mb-8",children:[a.jsx("h1",{className:"text-3xl font-bold mb-2",children:"Create Your Account"}),a.jsx("p",{className:"text-light-textSecondary dark:text-dark-textSecondary",children:"Join FitClub and start your fitness journey"})]}),a.jsx("form",{onSubmit:async e=>{e.preventDefault();const r=(()=>{const e={};return x.name.trim()||(e.name="Name is required"),x.email.trim()?/\S+@\S+\.\S+/.test(x.email)||(e.email="Email is invalid"):e.email="Email is required",x.password?x.password.length<8&&(e.password="Password must be at least 8 characters"):e.password="Password is required",x.password!==x.confirmPassword&&(e.confirmPassword="Passwords do not match"),x.agreeTerms||(e.agreeTerms="You must agree to the terms and conditions"),e})();if(Object.keys(r).length>0)k(r);else{b(!0);try{const e=x.name.trim().split(" "),r=e[0],a=e.slice(1).join(" ")||"",{data:s,error:t}=await d.signUp(x.email,x.password,{first_name:r,last_name:a});t?k({form:t.message||"Registration failed"}):s&&(s.message?(k({form:"Please check your email for the confirmation link before logging in."}),N("/login",{state:{message:"Please check your email for the confirmation link."}})):s.user&&(await m.create({id:s.user.id,email:x.email,first_name:r,last_name:a,created_at:(new Date).toISOString()}),N("/profile")))}catch(a){k({form:"An unexpected error occurred. Please try again."})}finally{b(!1)}}},children:a.jsxs("div",{className:"space-y-4",children:[a.jsxs("div",{children:[a.jsx("label",{htmlFor:"name",className:"block text-sm font-medium mb-1",children:"Full Name"}),a.jsxs("div",{className:"relative",children:[a.jsx("input",{id:"name",name:"name",type:"text",value:x.name,onChange:w,className:"input pl-10 "+(f.name?"border-error-500 dark:border-error-500":""),placeholder:"John Doe"}),a.jsx(s,{className:"absolute left-3 top-1/2 -translate-y-1/2 text-light-textSecondary dark:text-dark-textSecondary"})]}),f.name&&a.jsx("p",{className:"mt-1 text-sm text-error-600 dark:text-error-400",children:f.name})]}),a.jsxs("div",{children:[a.jsx("label",{htmlFor:"email",className:"block text-sm font-medium mb-1",children:"Email"}),a.jsxs("div",{className:"relative",children:[a.jsx("input",{id:"email",name:"email",type:"email",value:x.email,onChange:w,className:"input pl-10 "+(f.email?"border-error-500 dark:border-error-500":""),placeholder:"your@email.com"}),a.jsx(t,{className:"absolute left-3 top-1/2 -translate-y-1/2 text-light-textSecondary dark:text-dark-textSecondary"})]}),f.email&&a.jsx("p",{className:"mt-1 text-sm text-error-600 dark:text-error-400",children:f.email})]}),a.jsxs("div",{children:[a.jsx("label",{htmlFor:"password",className:"block text-sm font-medium mb-1",children:"Password"}),a.jsxs("div",{className:"relative",children:[a.jsx("input",{id:"password",name:"password",type:u?"text":"password",value:x.password,onChange:w,className:"input pl-10 pr-10 "+(f.password?"border-error-500 dark:border-error-500":""),placeholder:"••••••••"}),a.jsx(i,{className:"absolute left-3 top-1/2 -translate-y-1/2 text-light-textSecondary dark:text-dark-textSecondary"}),a.jsx("button",{type:"button",className:"absolute right-3 top-1/2 -translate-y-1/2 text-light-textSecondary dark:text-dark-textSecondary",onClick:()=>p(!u),children:u?a.jsx(l,{size:18}):a.jsx(n,{size:18})})]}),f.password&&a.jsx("p",{className:"mt-1 text-sm text-error-600 dark:text-error-400",children:f.password}),x.password&&a.jsxs("div",{className:"mt-2",children:[a.jsxs("div",{className:"flex items-center justify-between mb-1",children:[a.jsx("span",{className:"text-xs text-light-textSecondary dark:text-dark-textSecondary",children:"Password strength:"}),a.jsx("span",{className:"text-xs font-medium",children:(S=v,["Very Weak","Weak","Fair","Good","Strong","Very Strong"][S])})]}),a.jsx("div",{className:"w-full h-1.5 bg-light-background dark:bg-dark-background rounded-full overflow-hidden",children:a.jsx("div",{className:`h-full ${(e=>["bg-error-500","bg-error-400","bg-warning-400","bg-warning-500","bg-success-400","bg-success-500"][e])(v)}`,style:{width:16.66*(v+1)+"%"}})})]})]}),a.jsxs("div",{children:[a.jsx("label",{htmlFor:"confirmPassword",className:"block text-sm font-medium mb-1",children:"Confirm Password"}),a.jsxs("div",{className:"relative",children:[a.jsx("input",{id:"confirmPassword",name:"confirmPassword",type:y?"text":"password",value:x.confirmPassword,onChange:w,className:"input pl-10 pr-10 "+(f.confirmPassword?"border-error-500 dark:border-error-500":""),placeholder:"••••••••"}),a.jsx(i,{className:"absolute left-3 top-1/2 -translate-y-1/2 text-light-textSecondary dark:text-dark-textSecondary"}),a.jsx("button",{type:"button",className:"absolute right-3 top-1/2 -translate-y-1/2 text-light-textSecondary dark:text-dark-textSecondary",onClick:()=>g(!y),children:y?a.jsx(l,{size:18}):a.jsx(n,{size:18})})]}),f.confirmPassword&&a.jsx("p",{className:"mt-1 text-sm text-error-600 dark:text-error-400",children:f.confirmPassword})]}),a.jsxs("div",{className:"flex items-start",children:[a.jsx("div",{className:"flex items-center h-5",children:a.jsx("input",{id:"agreeTerms",name:"agreeTerms",type:"checkbox",checked:x.agreeTerms,onChange:w,className:"h-4 w-4 rounded border-light-border dark:border-dark-border text-primary-600 focus:ring-primary-500"})}),a.jsxs("div",{className:"ml-3 text-sm",children:[a.jsxs("label",{htmlFor:"agreeTerms",children:["I agree to the"," ",a.jsx(o,{to:"/terms",className:"text-primary-600 dark:text-primary-500 hover:underline",children:"Terms of Service"})," ","and"," ",a.jsx(o,{to:"/privacy",className:"text-primary-600 dark:text-primary-500 hover:underline",children:"Privacy Policy"})]}),f.agreeTerms&&a.jsx("p",{className:"mt-1 text-sm text-error-600 dark:text-error-400",children:f.agreeTerms})]})]}),a.jsx(c.button,{type:"submit",className:"btn btn-primary w-full",disabled:j,whileTap:{scale:.98},children:j?"Creating Account...":"Create Account"})]})}),a.jsxs("p",{className:"mt-8 text-center text-sm",children:["Already have an account?"," ",a.jsx(o,{to:"/login",className:"font-medium text-primary-600 dark:text-primary-500 hover:underline",children:"Sign in"})]})]})})})});var S};export{x as default};
