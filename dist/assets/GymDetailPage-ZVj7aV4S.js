import{a5 as e,u as a,r,j as s,_ as t,k as i,a as l,g as n,m as d,S as c,a6 as o,a7 as m,p as x,t as h,v as y,s as g}from"./index-bGB9rp9t.js";import{m as p}from"./motion-DaFSZY4b.js";const b=()=>{const{id:b}=e(),u=a(),[j,N]=r.useState(0),[k,v]=r.useState(null),[f,w]=r.useState(!1),[S,C]=r.useState(null),[_,$]=r.useState("monthly"),[P,A]=r.useState([]),[z,B]=r.useState(!1),[F,O]=r.useState(null),[U,Y]=r.useState(null);r.useEffect(()=>{b&&(async()=>{try{const{data:e,error:a}=await h.getById(b);if(a)throw new Error(a.message||"Failed to load gym");e?v(e):u("/gyms")}catch(e){Y(e.message||"Failed to load gym"),u("/gyms")}})();(async()=>{const{user:e}=await y.getUser();O(e)})();(async()=>{const{data:e}=await g.getAll();if(e){const a=e.map(e=>({...e,features:"string"==typeof e.features?JSON.parse(e.features):e.features||[]}));A(a),C(a.find(e=>"Premium"===e.name)||a[0])}})()},[b,u]);if(!k)return s.jsx("div",{className:"min-h-screen flex items-center justify-center",children:s.jsx("div",{className:"text-center",children:s.jsx("h2",{className:"text-2xl font-bold mb-4",children:"Loading..."})})});const E=k.hours?"string"==typeof k.hours?{everyday:k.hours}:k.hours:{everyday:"Hours not available"};return s.jsxs("div",{className:"min-h-screen py-16",children:[s.jsxs("div",{className:"container-custom",children:[s.jsxs(p.button,{className:"flex items-center text-primary-600 dark:text-primary-500 mb-6 hover:text-primary-700 dark:hover:text-primary-300 transition-colors",onClick:()=>u("/gyms"),initial:{opacity:0,x:-20},animate:{opacity:1,x:0},transition:{duration:.3},children:[s.jsx(t,{className:"mr-2"}),"Back to Gyms"]}),s.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6 mb-8",children:[s.jsx(p.div,{className:"relative h-96 rounded-xl overflow-hidden",initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{duration:.5},children:s.jsx("img",{src:k.image_url||k.images&&k.images[j]||"/placeholder-gym.jpg",alt:`${k.name} view ${j+1}`,className:"w-full h-full object-cover"})}),s.jsx("div",{className:"grid grid-cols-2 gap-4",children:(k.images&&k.images.length>0?k.images:[k.image_url]).filter(Boolean).map((e,a)=>s.jsx(p.button,{className:"relative h-44 rounded-lg overflow-hidden transition-all duration-300 "+(j===a?"ring-2 ring-primary-500 shadow-lg":"hover:ring-2 hover:ring-primary-300"),onClick:()=>N(a),initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{duration:.5,delay:.1*a},children:s.jsx("img",{src:e,alt:`${k.name} thumbnail ${a+1}`,className:"w-full h-full object-cover"})},a))})]}),s.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-3 gap-8",children:[s.jsx("div",{className:"lg:col-span-2",children:s.jsxs(p.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{duration:.5},children:[s.jsxs("div",{className:"card mb-8",children:[s.jsx("h1",{className:"text-3xl font-bold mb-4",children:k.name}),s.jsxs("div",{className:"flex items-center mb-4",children:[s.jsxs("div",{className:"flex items-center mr-4",children:[s.jsx(i,{className:"text-warning-500 mr-1"}),s.jsx("span",{className:"font-medium",children:k.rating}),s.jsxs("span",{className:"text-light-textSecondary dark:text-dark-textSecondary ml-1",children:["(",k.total_reviews||k.reviewCount||0," reviews)"]})]}),s.jsxs("div",{className:"flex items-center text-light-textSecondary dark:text-dark-textSecondary",children:[s.jsx(l,{className:"mr-1"}),s.jsx("span",{children:k.address})]})]}),s.jsx("p",{className:"text-light-textSecondary dark:text-dark-textSecondary mb-6",children:k.description}),k.monthlyPrice&&s.jsx("div",{className:"bg-gradient-to-r from-primary-50 to-primary-100 dark:from-primary-900/20 dark:to-primary-800/20 p-6 rounded-lg mb-6",children:s.jsxs("div",{className:"flex flex-col md:flex-row items-center justify-between gap-4",children:[s.jsxs("div",{className:"text-center md:text-left",children:[s.jsx("h3",{className:"text-xl font-bold mb-2",children:"Start Your Fitness Journey"}),s.jsx("p",{className:"text-light-textSecondary dark:text-dark-textSecondary",children:"Get access to all amenities and classes"})]}),s.jsx("div",{className:"flex items-center gap-4",children:s.jsx("button",{className:"btn btn-primary btn-lg px-6 py-2.5 shadow-lg hover:shadow-xl transition-all duration-300",onClick:()=>{F?w(!0):u("/login")},children:"Subscribe Now"})})]})})]}),s.jsxs("div",{className:"card mb-8",children:[s.jsx("h2",{className:"text-xl font-bold mb-4",children:"Amenities"}),s.jsx("div",{className:"grid grid-cols-2 md:grid-cols-3 gap-4",children:(k.amenities||[]).map((e,a)=>s.jsxs("div",{className:"flex items-center p-3 bg-light-background dark:bg-dark-background rounded-lg hover:bg-primary-50 dark:hover:bg-primary-900/20 transition-colors",children:[s.jsx(n,{className:"text-success-500 mr-2"}),s.jsx("span",{children:e})]},a))})]}),k.classes&&k.classes.length>0&&s.jsxs("div",{className:"card",children:[s.jsx("h2",{className:"text-xl font-bold mb-4",children:"Today's Classes"}),s.jsx("div",{className:"space-y-4",children:k.classes.map((e,a)=>s.jsxs("div",{className:"flex items-center justify-between p-4 bg-light-background dark:bg-dark-background rounded-lg hover:bg-primary-50 dark:hover:bg-primary-900/20 transition-colors",children:[s.jsxs("div",{children:[s.jsx("h3",{className:"font-medium",children:e.name}),s.jsxs("p",{className:"text-sm text-light-textSecondary dark:text-dark-textSecondary",children:[e.instructor," â€¢ ",e.duration]})]}),s.jsxs("div",{className:"text-right",children:[s.jsx("p",{className:"font-medium",children:e.time}),s.jsx("button",{className:"text-sm text-primary-600 dark:text-primary-500 hover:text-primary-700 dark:hover:text-primary-400 transition-colors",children:"Book Now"})]})]},a))})]})]})}),s.jsx("div",{className:"lg:col-span-1",children:s.jsxs(p.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{duration:.5,delay:.2},children:[s.jsxs("div",{className:"card mb-6",children:[s.jsx("h2",{className:"text-xl font-bold mb-4",children:"Hours of Operation"}),s.jsx("div",{className:"space-y-2",children:Object.entries(E).map(([e,a])=>s.jsxs("div",{className:"flex justify-between items-center py-2 border-b border-light-border dark:border-dark-border last:border-b-0",children:[s.jsx("span",{className:"capitalize font-medium",children:e}),s.jsx("span",{className:"text-light-textSecondary dark:text-dark-textSecondary",children:a})]},e))})]}),s.jsxs("div",{className:"card",children:[s.jsx("h2",{className:"text-xl font-bold mb-4",children:"Contact Information"}),s.jsxs("div",{className:"space-y-4",children:[k.phone&&s.jsxs("div",{className:"flex items-center hover:bg-light-background dark:hover:bg-dark-background p-2 rounded-lg transition-colors",children:[s.jsx(d,{className:"mr-3 text-primary-600 dark:text-primary-500"}),s.jsx("a",{href:`tel:${k.phone}`,className:"text-primary-600 dark:text-primary-500 hover:underline",children:k.phone})]}),k.email&&s.jsxs("div",{className:"flex items-center hover:bg-light-background dark:hover:bg-dark-background p-2 rounded-lg transition-colors",children:[s.jsx(c,{className:"mr-3 text-primary-600 dark:text-primary-500"}),s.jsx("a",{href:`mailto:${k.email}`,className:"text-primary-600 dark:text-primary-500 hover:underline",children:k.email})]}),k.website&&s.jsxs("div",{className:"flex items-center hover:bg-light-background dark:hover:bg-dark-background p-2 rounded-lg transition-colors",children:[s.jsx(o,{className:"mr-3 text-primary-600 dark:text-primary-500"}),s.jsx("a",{href:`https://${k.website}`,target:"_blank",rel:"noopener noreferrer",className:"text-primary-600 dark:text-primary-500 hover:underline",children:k.website})]}),k.instagram&&s.jsxs("div",{className:"flex items-center hover:bg-light-background dark:hover:bg-dark-background p-2 rounded-lg transition-colors",children:[s.jsx(m,{className:"mr-3 text-primary-600 dark:text-primary-500"}),s.jsx("a",{href:`https://instagram.com/${k.instagram.substring(1)}`,target:"_blank",rel:"noopener noreferrer",className:"text-primary-600 dark:text-primary-500 hover:underline",children:k.instagram})]})]})]})]})})]})]}),f&&s.jsx(p.div,{className:"fixed inset-0 bg-black/50 backdrop-blur-sm z-50 flex items-center justify-center p-4",initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},onClick:()=>w(!1),children:s.jsx(p.div,{className:"bg-white dark:bg-dark-card rounded-2xl shadow-2xl max-w-2xl w-full max-h-[90vh] overflow-y-auto",initial:{scale:.9,opacity:0},animate:{scale:1,opacity:1},exit:{scale:.9,opacity:0},onClick:e=>e.stopPropagation(),children:s.jsxs("div",{className:"p-6",children:[s.jsxs("div",{className:"flex items-center justify-between mb-6",children:[s.jsxs("h2",{className:"text-2xl font-bold",children:["Subscribe to ",k.name]}),s.jsx("button",{onClick:()=>w(!1),className:"p-2 rounded-full hover:bg-gray-100 dark:hover:bg-gray-700 transition-colors",children:s.jsx(x,{size:20})})]}),U&&s.jsx("div",{className:"mb-4 p-4 bg-red-50 dark:bg-red-900/20 border border-red-200 dark:border-red-800 rounded-lg",children:s.jsx("p",{className:"text-red-600 dark:text-red-400",children:U})}),s.jsx("div",{className:"flex justify-center mb-6",children:s.jsxs("div",{className:"bg-light-card dark:bg-dark-background rounded-full p-1 inline-flex",children:[s.jsx("button",{className:"px-4 py-2 rounded-full text-sm font-medium transition-colors "+("monthly"===_?"bg-primary-600 text-white":"text-light-textSecondary dark:text-dark-textSecondary"),onClick:()=>$("monthly"),children:"Monthly"}),s.jsxs("button",{className:"px-4 py-2 rounded-full text-sm font-medium transition-colors "+("yearly"===_?"bg-primary-600 text-white":"text-light-textSecondary dark:text-dark-textSecondary"),onClick:()=>$("yearly"),children:["Yearly",s.jsx("span",{className:"ml-1 text-xs bg-success-500 text-white px-2 py-0.5 rounded-full",children:"Save 20%"})]})]})}),s.jsx("div",{className:"space-y-4 mb-6",children:P.map(e=>s.jsxs("div",{className:"p-4 rounded-lg border-2 cursor-pointer transition-all duration-300 "+(S?.id===e.id?"border-primary-500 bg-primary-50 dark:bg-primary-900/20 shadow-md":"border-light-border dark:border-dark-border hover:border-primary-300 hover:shadow-sm"),onClick:()=>C(e),children:[s.jsxs("div",{className:"flex items-center justify-between mb-2",children:[s.jsx("h3",{className:"text-lg font-bold",children:e.name}),s.jsxs("div",{className:"text-right",children:[s.jsxs("span",{className:"text-2xl font-bold",children:["$","monthly"===_?e.price_monthly:e.price_yearly]}),s.jsxs("span",{className:"text-sm text-light-textSecondary dark:text-dark-textSecondary",children:["/","monthly"===_?"month":"year"]})]})]}),s.jsx("p",{className:"text-light-textSecondary dark:text-dark-textSecondary mb-3",children:e.description}),s.jsxs("div",{className:"text-sm text-primary-600 dark:text-primary-400",children:[e.gym_access_description," â€¢"," ",Array.isArray(e.features)?e.features.length:0," ","features included"]})]},e.id))}),s.jsxs("div",{className:"bg-light-background dark:bg-dark-background p-4 rounded-lg mb-6",children:[s.jsxs("h4",{className:"font-semibold mb-3",children:["Access to ",k.name," includes:"]}),s.jsx("div",{className:"grid grid-cols-2 gap-2 text-sm",children:(k.amenities||[]).slice(0,6).map((e,a)=>s.jsxs("div",{className:"flex items-center",children:[s.jsx(n,{className:"text-success-500 mr-2",size:14}),s.jsx("span",{children:e})]},a))})]}),s.jsx("button",{className:"w-full btn btn-primary btn-lg shadow-lg hover:shadow-xl transition-all duration-300",onClick:async()=>{if(F&&S){B(!0);try{const e=new URLSearchParams({plan:S.id,billing:_,gym:k.id,gymName:k.name,price:"monthly"===_?S.price_monthly:S.price_yearly,currency:"USD"});w(!1),u(`/payment?${e.toString()}`)}catch(e){Y("Failed to process subscription. Please try again.")}finally{B(!1)}}},disabled:z||!S,children:z?"Processing...":`Continue to Payment - $${"monthly"===_?S?.price_monthly:S?.price_yearly}/${"monthly"===_?"month":"year"}`}),s.jsx("p",{className:"text-xs text-light-textSecondary dark:text-dark-textSecondary text-center mt-4",children:"You'll be redirected to secure payment. Cancel anytime."})]})})})]})};export{b as default};
