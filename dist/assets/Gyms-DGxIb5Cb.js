import{j as e,L as s,h as t,a,i as r,k as i,l,m as n,P as c,r as d,e as o,n as m,o as x,p as h,q as g,t as u,v as b,w as p}from"./index-bGB9rp9t.js";import{m as y}from"./motion-DaFSZY4b.js";const j=({gym:c,isFavorite:d=!1,onToggleFavorite:o})=>{const{id:m,name:x,images:h,image:g,image_url:u,location:b,rating:p,total_reviews:j=0,opening_hours:f,hours:N,amenities:k=[],distance:v,monthlyPrice:w,currency:S="EGP",phone:C,address:F}=c,z=h?h[0]:u||g;return e.jsxs(y.div,{className:"card overflow-hidden h-full flex flex-col",whileHover:{y:-5},transition:{duration:.2},children:[e.jsx(s,{to:`/gyms/${m}`,className:"block",children:e.jsxs("div",{className:"relative h-48 w-full overflow-hidden rounded-t-lg",children:[e.jsx("img",{src:z,alt:x,className:"w-full h-full object-cover transition-transform duration-500 hover:scale-110"}),o&&e.jsxs("button",{type:"button",onClick:e=>{e.preventDefault(),o(c)},className:"absolute bottom-3 right-3 px-2 py-1 rounded-full flex items-center gap-1 text-sm transition-colors "+(d?"bg-red-600 text-white":"bg-black/70 text-white hover:bg-black/80"),"aria-label":d?"Remove from favorites":"Add to favorites",children:[e.jsx(t,{size:14,className:d?"fill-white":""}),e.jsx("span",{children:d?"Favorited":"Favorite"})]}),v&&e.jsxs("div",{className:"absolute top-3 right-3 bg-black/70 text-white text-xs px-2 py-1 rounded-full flex items-center",children:[e.jsx(a,{size:12,className:"mr-1"}),e.jsxs("span",{children:[v," km"]})]}),w&&e.jsxs("div",{className:"absolute top-3 left-3 bg-red-600 text-white text-sm px-2 py-1 rounded-full flex items-center font-bold",children:[e.jsx(r,{size:12,className:"mr-1"}),e.jsxs("span",{children:[w," ",S,"/month"]})]})]})}),e.jsxs("div",{className:"p-5 flex flex-col flex-grow",children:[e.jsx(s,{to:`/gyms/${m}`,className:"block",children:e.jsx("h3",{className:"text-xl font-bold mb-2 hover:text-primary-600 dark:hover:text-primary-400 transition-colors",children:x})}),e.jsxs("div",{className:"flex items-center text-sm text-light-textSecondary dark:text-dark-textSecondary mb-2",children:[e.jsx(a,{size:14,className:"mr-1"}),e.jsx("span",{children:b})]}),F&&e.jsx("div",{className:"text-xs text-light-textSecondary dark:text-dark-textSecondary mb-3",children:F}),p&&e.jsxs("div",{className:"flex items-center mb-3",children:[e.jsxs("div",{className:"flex items-center",children:[e.jsx(i,{className:"text-warning-500 mr-1",size:16}),e.jsx("span",{className:"font-medium",children:p})]}),j>0&&e.jsxs("span",{className:"text-sm text-light-textSecondary dark:text-dark-textSecondary ml-2",children:["(",j," reviews)"]})]}),(N||f)&&e.jsxs("div",{className:"flex items-center text-sm text-light-textSecondary dark:text-dark-textSecondary mb-3",children:[e.jsx(l,{size:14,className:"mr-1"}),e.jsx("span",{children:(e=>{const s=f||e;if("string"==typeof s)return s;if("object"==typeof s&&s){return Object.values(s)[0]||"See details for hours"}return"Hours not available"})(N)})]}),C&&e.jsxs("div",{className:"flex items-center text-sm text-light-textSecondary dark:text-dark-textSecondary mb-3",children:[e.jsx(n,{size:14,className:"mr-1"}),e.jsx("span",{children:C})]}),k.length>0&&e.jsx("div",{className:"mt-auto pt-3",children:e.jsxs("div",{className:"flex flex-wrap gap-2",children:[k.slice(0,4).map((s,t)=>e.jsx("span",{className:"text-xs bg-light-background dark:bg-dark-background px-2 py-1 rounded-full",children:s},t)),k.length>4&&e.jsxs("span",{className:"text-xs bg-primary-100 dark:bg-primary-900/30 text-primary-600 dark:text-primary-400 px-2 py-1 rounded-full",children:["+",k.length-4," more"]})]})})]}),e.jsx("div",{className:"p-5 pt-0",children:e.jsx(s,{to:`/gyms/${m}`,className:"w-full btn btn-outline hover:btn-primary transition-all duration-300",children:"View Details"})})]})};j.propTypes={gym:c.shape({id:c.string.isRequired,name:c.string.isRequired,images:c.arrayOf(c.string),image:c.string,image_url:c.string,location:c.string.isRequired,rating:c.number,total_reviews:c.number,reviewCount:c.number,opening_hours:c.oneOfType([c.string,c.object]),hours:c.oneOfType([c.string,c.object]),amenities:c.arrayOf(c.string),distance:c.string,monthlyPrice:c.number,currency:c.string,phone:c.string,address:c.string}).isRequired,isFavorite:c.bool,onToggleFavorite:c.func};const f=()=>{const[s,t]=d.useState({search:"",amenities:[],rating:0,distance:30,city:""}),[r,l]=d.useState(!1),[n,c]=d.useState([]),[f,N]=d.useState(!0),[k,v]=d.useState(null),[w,S]=d.useState([]);d.useEffect(()=>{(async()=>{N(!0),v(null);try{const{data:e,error:s}=await u.getAll();if(s)throw new Error(s.message||"Failed to load gyms");e&&e.length>0?c(e):c([])}catch(e){v(e.message||"Failed to load gyms"),c([])}finally{N(!1)}})()},[]),d.useEffect(()=>{(async()=>{try{const{user:e}=await b.getUser();if(!e)return void S([]);const{data:s}=await p.getIdsByUserId(e.id);S((s||[]).map(e=>e.gym_id))}catch{S([])}})()},[]);const C=async e=>{try{const{user:s}=await b.getUser();if(!s)return void alert("Please log in to favorite gyms");if(w.includes(e.id)){const{error:t}=await p.remove(s.id,e.id);t||S(w.filter(s=>s!==e.id))}else{const{error:t}=await p.add(s.id,e.id);t||S([e.id,...w])}}catch(s){}},F=n.filter(e=>!(s.search&&!e.name.toLowerCase().includes(s.search.toLowerCase())&&!e.location.toLowerCase().includes(s.search.toLowerCase()))&&((!s.city||e.city===s.city)&&(!(s.rating>0&&e.rating<s.rating)&&(!(parseFloat(e.distance||"5")>s.distance)&&(!(s.amenities.length>0)||s.amenities.every(s=>e.amenities.includes(s)))))));return f?e.jsx("div",{className:"min-h-screen py-16 flex items-center justify-center",children:e.jsxs("div",{className:"animate-pulse flex flex-col items-center",children:[e.jsx("div",{className:"w-32 h-32 bg-light-border dark:bg-dark-border rounded-full mb-4 flex items-center justify-center",children:e.jsx(o,{className:"animate-spin text-4xl text-primary-600 dark:text-primary-500"})}),e.jsx("div",{className:"h-6 bg-light-border dark:bg-dark-border rounded w-48 mb-2"}),e.jsx("div",{className:"h-4 bg-light-border dark:bg-dark-border rounded w-32"})]})}):k?e.jsx("div",{className:"min-h-screen py-16 flex items-center justify-center",children:e.jsxs("div",{className:"card p-8 max-w-md mx-auto text-center",children:[e.jsx("div",{className:"text-error-600 dark:text-error-400 text-5xl mb-4",children:"⚠️"}),e.jsx("h2",{className:"text-2xl font-bold mb-2",children:"Error Loading Gyms"}),e.jsx("p",{className:"text-light-textSecondary dark:text-dark-textSecondary mb-6",children:k}),e.jsx("button",{onClick:()=>window.location.reload(),className:"btn btn-primary",children:"Try Again"})]})}):e.jsxs("div",{className:"min-h-screen",children:[e.jsx("section",{className:"bg-gradient-to-br from-primary-700 to-primary-600 dark:from-primary-900 dark:to-primary-800 text-white py-16",children:e.jsx("div",{className:"container-custom text-center",children:e.jsxs(y.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{duration:.5},children:[e.jsx("h1",{className:"text-4xl md:text-5xl font-bold mb-4",children:"Find Gyms in Egypt"}),e.jsx("p",{className:"text-xl text-white/90 max-w-2xl mx-auto",children:"Discover the best gyms across Egypt with competitive EGP pricing"}),e.jsx("div",{className:"mt-8 max-w-lg mx-auto",children:e.jsxs("div",{className:"relative",children:[e.jsx("input",{type:"text",placeholder:"Search by location or gym name",value:s.search,onChange:e=>{t({...s,search:e.target.value})},className:"input pl-10 pr-14 py-3 text-light-text dark:text-dark-text bg-white/90 dark:bg-dark-background/90 backdrop-blur border-transparent focus:border-transparent"}),e.jsx(m,{className:"absolute left-3 top-1/2 -translate-y-1/2 text-light-textSecondary dark:text-dark-textSecondary",size:20}),e.jsx("button",{className:"absolute right-3 top-1/2 -translate-y-1/2 p-1 rounded-full bg-secondary-600 text-white",onClick:()=>l(!r),children:e.jsx(x,{size:16})})]})})]})})}),e.jsx("section",{className:"py-16",children:e.jsx("div",{className:"container-custom",children:e.jsxs("div",{className:"flex flex-col lg:flex-row gap-8",children:[e.jsx(y.div,{className:"lg:w-1/4 "+(r?"block":"hidden lg:block"),initial:{opacity:0,x:-20},animate:{opacity:1,x:0},transition:{duration:.3},children:e.jsxs("div",{className:"card sticky top-24",children:[e.jsxs("div",{className:"flex items-center justify-between mb-6",children:[e.jsx("h2",{className:"text-xl font-bold",children:"Filters"}),e.jsx("button",{className:"lg:hidden p-2 rounded-full hover:bg-light-background dark:hover:bg-dark-background",onClick:()=>l(!1),children:e.jsx(h,{size:20})})]}),e.jsxs("div",{className:"mb-6",children:[e.jsxs("h3",{className:"font-semibold mb-3 flex items-center",children:[e.jsx(a,{className:"mr-2"}),"City"]}),e.jsx("div",{className:"flex flex-wrap gap-2",children:["All Cities","Cairo","Alexandria","Giza","New Capital","Hurghada","Mansoura","Sharm El Sheikh"].map(a=>e.jsx("button",{className:"px-3 py-1.5 rounded-full text-sm "+("All Cities"===a&&!s.city||s.city===a?"bg-primary-100 dark:bg-primary-900/30 text-primary-600 dark:text-primary-400":"bg-light-background dark:bg-dark-background"),onClick:()=>(e=>{t({...s,city:"All Cities"===e?"":e})})(a),children:a},a))})]}),e.jsxs("div",{className:"mb-6",children:[e.jsxs("h3",{className:"font-semibold mb-3 flex items-center",children:[e.jsx(a,{className:"mr-2"}),"Distance"]}),e.jsxs("div",{children:[e.jsx("input",{type:"range",min:"1",max:"50",value:s.distance,onChange:e=>{t({...s,distance:parseInt(e.target.value)})},className:"w-full h-2 bg-light-border dark:bg-dark-border rounded-lg appearance-none cursor-pointer"}),e.jsxs("div",{className:"flex justify-between text-sm text-light-textSecondary dark:text-dark-textSecondary mt-2",children:[e.jsx("span",{children:"1 km"}),e.jsxs("span",{children:[s.distance," km"]}),e.jsx("span",{children:"50 km"})]})]})]}),e.jsxs("div",{className:"mb-6",children:[e.jsxs("h3",{className:"font-semibold mb-3 flex items-center",children:[e.jsx(i,{className:"mr-2"}),"Rating"]}),e.jsx("div",{className:"flex space-x-1",children:[4,3,2,1,0].map(a=>e.jsx("button",{className:"px-3 py-1.5 rounded text-sm "+(s.rating===a?"bg-primary-100 dark:bg-primary-900/30 text-primary-600 dark:text-primary-400":"bg-light-background dark:bg-dark-background"),onClick:()=>(e=>{t({...s,rating:e})})(a),children:a>0?`${a}+`:"Any"},a))})]}),e.jsxs("div",{children:[e.jsxs("h3",{className:"font-semibold mb-3 flex items-center",children:[e.jsx(g,{className:"mr-2"}),"Amenities"]}),e.jsx("div",{className:"flex flex-wrap gap-2",children:["Pool","Sauna","Spa","Weight Room","Cardio","Classes","CrossFit","Personal Training","Yoga Studio","Basketball Court","Water Classes"].map(a=>e.jsx("button",{className:"px-3 py-1.5 rounded-full text-sm "+(s.amenities.includes(a)?"bg-primary-100 dark:bg-primary-900/30 text-primary-600 dark:text-primary-400":"bg-light-background dark:bg-dark-background"),onClick:()=>(e=>{s.amenities.includes(e)?t({...s,amenities:s.amenities.filter(s=>s!==e)}):t({...s,amenities:[...s.amenities,e]})})(a),children:a},a))})]}),e.jsx("button",{className:"mt-6 w-full btn btn-outline",onClick:()=>t({search:"",amenities:[],rating:0,distance:30,city:""}),children:"Reset Filters"})]})}),e.jsxs("div",{className:"lg:w-3/4",children:[e.jsx("div",{className:"lg:hidden mb-6",children:e.jsxs("button",{className:"btn btn-outline w-full flex items-center justify-center",onClick:()=>l(!r),children:[e.jsx(x,{className:"mr-2"}),e.jsx("span",{children:r?"Hide Filters":"Show Filters"})]})}),e.jsx("div",{className:"flex items-center justify-between mb-6",children:e.jsxs("p",{className:"text-light-textSecondary dark:text-dark-textSecondary",children:["Showing ",F.length," results",s.search&&e.jsxs(e.Fragment,{children:[' for "',s.search,'"']}),s.city&&e.jsxs(e.Fragment,{children:[" in ",s.city]})]})}),F.length>0?e.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:F.map((s,t)=>e.jsx(y.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{duration:.4,delay:.1*t},children:e.jsx(j,{gym:s,isFavorite:w.includes(s.id),onToggleFavorite:C})},s.id))}):e.jsxs("div",{className:"card text-center py-12",children:[e.jsx("h3",{className:"text-xl font-semibold mb-2",children:"No gyms found"}),e.jsx("p",{className:"text-light-textSecondary dark:text-dark-textSecondary",children:"Try adjusting your filters or search query"})]})]})]})})})]})};export{f as default};
